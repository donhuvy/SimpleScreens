<?xml version="1.0" encoding="UTF-8"?>
<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-2.1.xsd"
        default-menu-include="false">
    <parameter name="organizationPartyId" required="true"/>
    <parameter name="timePeriodIdList" required="true"/>
    <transition name="accountLedger">
        <default-response url="../AccountLedger"/>
    </transition>
    <actions>
        <service-call name="mantle.ledger.LedgerReportServices.run#BalanceSheet" out-map="context" in-map="context"/>
        <set field="findEntryUrl" from="sri.buildUrlInfo('accountLedger')"/>
        <set field="csvUrl"
             from="sri.getScreenUrlInstance().cloneUrlInstance().addParameter('renderMode', 'csv').addParameter('saveFilename', 'BalanceSheet.csv')"/>
    </actions>
    <widgets>
        <link url="${csvUrl.pathWithParams}" url-type="plain" text="Tải về file CSV"/>
        <render-mode>
            <text type="html,vuet,qvt" location="component://SimpleScreens/template/ledger/BalanceSheet.html.ftl"
                  template="true" encode="false" no-boundary-comment="true"/>
            <text type="csv" location="component://SimpleScreens/template/ledger/BalanceSheet.csv.ftl" template="true"/>
        </render-mode>
    </widgets>
</screen>
